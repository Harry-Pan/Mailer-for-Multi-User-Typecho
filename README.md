本插件基于[呆小萌的邮件推送插件](https://github.com/ethanzhao2001/Mailer-Typecho)修改，适用于博客有多位用户发表文章的使用环境。

用于 Typecho 博客程序具的评论邮件通知插件，仅支持 1.2.0 及以上版本。

# 使用方法
下载本项目后，将文件夹名改为`Mailer`,上传至`usr/plugins`文件夹后在后台启用即可。

# 发信规则

优先度从高到低：

1. 只有站长以外的角色的评论操作会通知站长。
2. 当文章下出现评论（审核/未审核）时会通知站长。
3. 评论通过审核时会通知评论者。
4. 当文章下出现通过审核的评论时，会通知站长和文章作者。
5. 当有评论被回复时，会通知站长，文章作者和被回复者。
6. 当评论者和作者/评论者和被回复者/作者和被回复者为同一个人时，不会重复通知。

# 模板

本插件可以自定义通知模板，示例可参考theme/default

| 变量           | 含义         |
| -------------- | ------------ |
| {time}         | 评论时间     |
| {author}       | 昵称         |
| {avatar}       | 头像         |
| {text}         | 内容         |
| {mail}         | 邮箱         |
| {url}          | 网址         |
| {ip}           | IP           |
| {agent}        | UA           |
| {parentTime}   | 父级评论时间 |
| {parentName}   | 父级评论昵称 |
| {parentAvatar} | 父级评论头像 |
| {parentText}   | 父级评论内容 |
| {parentMail}   | 父级评论邮箱 |
| {title}        | 文章标题     |
| {permalink}    | 评论链接     |
| {siteTitle}    | 网站标题     |
| {siteUrl}      | 网站地址     |


# 说明

`宝塔/CDN防火墙`可能会拦截Typecho异步请求，也有可能是其他原因

解决方法（任选其一）：

1. 手动关闭异步模式
2. 将本机IP设置白名单
3. 防火墙关闭From-data协议
